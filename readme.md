# 淘宝用户行为分析

## 数据来源

- [淘宝用户购物行为数据集 - 阿里天池 - UserBehavior](https://tianchi.aliyun.com/dataset/649)
- [天猫推荐数据集Rec-Tmall - 阿里天池 - Tianchi_2014002_Rec_Tmall_Log](https://tianchi.aliyun.com/dataset/140281)
- [淘宝用户购物行为数据分析项目数据集 - tb-behavior.txt](https://gitcode.com/open-source-toolkit/15c09/?utm_source=tools_gitcode&index=bottom&type=card&)

### 淘宝用户行为数据集概述

1. 概述  

UserBehavior是阿里巴巴提供的一个淘宝用户行为数据集，用于隐式反馈推荐问题的研究。

1. 介绍  

| 文件名称          | 说明                     | 包含特征                             |
|-------------------|--------------------------|--------------------------------------|
| UserBehavior.csv   | 包含所有的用户行为数据   | 用户ID，商品ID，商品类目ID，行为类型，时间戳 |

本数据集包含了2017年11月25日至2017年12月3日之间，有行为的约一百万随机用户的所有行为（行为包括点击、购买、加购、喜欢）。数据集的组织形式和MovieLens-20M类似，即数据集的每一行表示一条用户行为，由用户ID、商品ID、商品类目ID、行为类型和时间戳组成，并以逗号分隔。关于数据集中每一列的详细描述如下：

| 列名称         | 说明                                   |
|----------------|----------------------------------------|
| 用户ID         | 整数类型，序列化后的用户ID             |
| 商品ID         | 整数类型，序列化后的商品ID             |
| 商品类目ID     | 整数类型，序列化后的商品所属类目ID     |
| 行为类型       | 字符串，枚举类型，包括('pv', 'buy', 'cart', 'fav') |
| 时间戳         | 行为发生的时间戳                       |

用户行为类型共有四种，它们分别是：

| 行为类型 | 说明               |
|----------|--------------------|
| pv       | 商品详情页pv，等价于点击 |
| buy      | 商品购买           |
| cart     | 将商品加入购物车   |
| fav      | 收藏商品           |

关于数据集大小的一些说明如下：

| 维度         | 数量       |
|--------------|------------|
| 用户数量     | 987,994    |
| 商品数量     | 4,162,024  |
| 商品类目数量 | 9,439      |
| 所有行为数量 | 100,150,807|

### Tianchi_2014002_Rec_Tmall_Log

用户在浏览天猫时的行为反映了他们对商品的偏好。该数据集包含1,333,729,303行，记录了用户与商品的交互。每行的特征如下所示。

| 列名       | 描述                                                                 |
|------------|----------------------------------------------------------------------|
| Item_id    | 一个整数在[1, 8133507]之间，表示一个唯一的商品。                          |
| User_id    | 一个字符串，如 "u9774184"，表示一个唯一的用户。                          |
| Action     | 行为类型，一个字符串，如 "click"、"collect"、"cart"、"alipay"，分别代表“点击”、“添加到收藏”、“添加到购物车”和“购买”。 |
| Vtime      | 行为的时间戳，一个字符串格式为 "yyyy-mm-dd hh:mm:ss"。                |
| 典型研究主题 | a) 矩阵补全  b) 排序                                                  |

### 淘宝用户购物行为数据分析项目数据集 - tb-behavior.txt

数据集简介

本仓库提供了一个名为“淘宝用户行为数据集”的资源文件，该数据集包含了3182257条用户行为数据。这些数据可以用于推荐系统、数据分析等场景。数据集中的字段包括：

- `id`: 用户ID
- `uidagegender`: 用户年龄和性别
- `item_id`: 商品ID
- `behavior_type`: 用户行为类型（1. 浏览、2. 收藏、3. 加购物车、4. 购买）
- `item_category`: 商品类别
- `date`: 行为发生的日期
- `province`: 用户所在省份

#### 数据集用途

该数据集可以用于以下分析和应用：

1. **推荐系统**: 基于用户行为数据进行个性化推荐。
2. **数据分析**: 分析用户行为模式、商品热度等。
3. **统计分析**:
  - **各省的前十热门关注产品**: 统计浏览、收藏、添加购物车和购买总量最多的前10个产品。
  - **各省的前十热门购买产品**: 统计销售最多的前10个产品。
  - **各省销售最好的产品类别前10**: 统计销售最多的前10个产品类别。
  - **各省男女用户数量**: 统计各省的男女用户数量（`gender`字段：0表示男，1表示女，2表示未知）。

#### 数据集字段说明

- `id`: 用户唯一标识符。
- `uidagegender`: 用户年龄和性别信息。
- `item_id`: 商品的唯一标识符。
- `behavior_type`: 用户行为类型，取值范围为1到4，分别表示浏览、收藏、加购物车和购买。
- `item_category`: 商品所属的类别。
- `date`: 用户行为发生的日期。
- `province`: 用户所在的省份。

#### 数据集示例

以下是数据集中的一条示例记录：

```
id, uidagegender, item_id, behavior_type, item_category, date, province
1, 25_1, 12345, 4, 101, 2023-01-01, 浙江省
```

## 结果 - 输出文件详解

本文档详细说明了淘宝用户行为分析系统生成的所有结果文件及其用途。所有输出文件按类型组织在`result/`目录下的不同子目录中。

## 数据表格 (result/tables/)

### 数据清洗与基础统计

1. **cleaned_userbehavior.csv**
   - 内容：经过清洗的淘宝用户行为数据
   - 包含字段：用户ID、商品ID、类目ID、行为类型、时间戳、日期、小时、星期几
   - 用途：所有后续分析的基础数据集

2. **userbehavior_descriptive_stats.csv**
   - 内容：UserBehavior数据集的描述性统计
   - 包含统计量：计数、均值、标准差、最小值、25%分位数、中位数、75%分位数、最大值
   - 用途：了解数据集的基本分布特征

3. **cleaned_tmall.csv**
   - 内容：经过清洗的天猫日志数据
   - 包含字段：商品ID、用户ID、行为类型、时间、日期、小时、星期几
   - 用途：天猫用户行为分析的基础数据集

4. **tmall_descriptive_stats.csv**
   - 内容：天猫数据集的描述性统计
   - 包含统计量：类似于userbehavior_descriptive_stats.csv
   - 用途：了解天猫数据集的基本分布特征

5. **basic_statistics.csv**
   - 内容：UserBehavior数据集的基本统计摘要
   - 包含指标：总用户数、总商品数、总类目数、总行为数
   - 用途：快速了解数据集规模和范围

### 用户行为分析

6. **behavior_distribution.csv**
   - 内容：不同行为类型(pv, buy, cart, fav)的分布情况
   - 包含字段：行为类型、数量、百分比
   - 用途：了解用户行为的整体分布模式

7. **daily_behaviors.csv**
   - 内容：按日期和行为类型分组的行为数量
   - 包含字段：日期作为索引，各行为类型作为列
   - 用途：分析行为随时间变化的趋势

8. **hourly_behaviors.csv**
   - 内容：按小时和行为类型分组的行为数量
   - 包含字段：小时(0-23)作为索引，各行为类型作为列
   - 用途：识别一天中不同时段的用户活跃模式

9. **day_of_week_behaviors.csv**
   - 内容：按星期几和行为类型分组的行为数量
   - 包含字段：星期几(周一至周日)作为索引，各行为类型作为列
   - 用途：识别一周中不同日期的用户活跃模式

10. **conversion_rates.csv**
    - 内容：不同行为阶段之间的转化率
    - 包含字段：从哪个行为、到哪个行为、转化率(%)
    - 用途：分析用户行为转化漏斗，识别转化瓶颈

11. **top_categories.csv**
    - 内容：按交互次数排序的前20个热门商品类目
    - 包含字段：类目ID、交互次数
    - 用途：了解最受欢迎的商品类目

12. **purchase_frequency.csv**
    - 内容：用户购买频率的分布
    - 包含字段：购买次数、用户数
    - 用途：分析用户购买行为的频率分布

13. **user_engagement_statistics.csv**
    - 内容：用户参与度的统计信息
    - 包含字段：统计量、数值
    - 用途：了解用户参与平台活动的程度

14. **user_engagement_distribution.csv**
    - 内容：用户参与度水平的分布
    - 包含字段：参与度水平(很低,低,中,高,很高)、用户数
    - 用途：分析不同参与度水平的用户分布

### 天猫数据分析

15. **tmall_basic_statistics.csv**
    - 内容：天猫数据的基本统计摘要
    - 包含指标：总用户数、总商品数、总行为数
    - 用途：了解天猫数据集的规模

16. **tmall_action_distribution.csv**
    - 内容：天猫数据中各行为类型的分布
    - 包含字段：行为类型、数量、百分比
    - 用途：了解天猫用户的行为分布

17. **tmall_daily_actions.csv**
    - 内容：天猫数据中按日期和行为类型分组的行为数量
    - 包含字段：日期作为索引，各行为类型作为列
    - 用途：分析天猫用户行为的日期模式

18. **tmall_hourly_actions.csv**
    - 内容：天猫数据中按小时和行为类型分组的行为数量
    - 包含字段：小时作为索引，各行为类型作为列
    - 用途：分析天猫用户一天中的活跃模式

19. **tmall_day_of_week_actions.csv**
    - 内容：天猫数据中按星期几和行为类型分组的行为数量
    - 包含字段：星期几作为索引，各行为类型作为列
    - 用途：分析天猫用户一周中的活跃模式

20. **tmall_interaction_statistics.csv**
    - 内容：天猫数据中用户-商品交互频率的统计信息
    - 包含字段：统计量、数值
    - 用途：了解用户与商品交互的频率分布

### 用户分群与聚类

21. **user_segmentation.csv**
    - 内容：基于RFM模型的用户分群结果
    - 包含字段：用户ID、最近购买天数、购买频率、R分数、F分数、RFM分数、用户群体
    - 用途：基于最近购买时间和购买频率分析用户价值

22. **segment_summary.csv**
    - 内容：各用户分群的汇总信息
    - 包含字段：客户群体、平均最近购买天数、最短/最长最近购买天数、平均购买频率、最低/最高购买频率、用户数
    - 用途：了解不同用户群体的特征

23. **user_clustering.csv**
    - 内容：基于K-means的用户聚类结果
    - 包含字段：用户ID、各行为类型计数、活跃天数、浏览类目数、聚类标签
    - 用途：基于多维行为特征对用户进行聚类分析

24. **cluster_descriptions.txt**
    - 内容：各聚类的文字描述
    - 包含信息：聚类编号、用户数量、百分比、显著特征及其值
    - 用途：对每个聚类的特征进行人类可理解的描述

### 购买行为分析

25. **purchase_interval_statistics.csv**
    - 内容：用户购买间隔的统计信息
    - 包含字段：统计量、天数
    - 用途：了解用户购买周期的分布

26. **user_category_statistics.csv**
    - 内容：用户购买品类数的统计信息
    - 包含字段：统计量、品类数
    - 用途：了解用户购买多样性的分布

27. **category_cooccurrence.csv**
    - 内容：品类共现的频率（前20对）
    - 包含字段：类目1、类目2、共现次数
    - 用途：发现经常被同一用户购买的类目组合

### 用户旅程分析

28. **behavior_sequences.csv**
    - 内容：用户行为序列分析结果
    - 包含字段：初始行为、下一个行为、次数、转换概率
    - 用途：分析用户行为的转换模式

29. **avg_time_between_behaviors.csv**
    - 内容：不同行为之间的平均时间间隔
    - 包含字段：初始行为、下一个行为、平均时间(分钟)
    - 用途：了解用户完成不同行为之间的时间间隔

### 类目分析

30. **category_behavior_analysis.csv**
    - 内容：各类目的行为分析和转化率
    - 包含字段：类目ID作为索引，各行为类型计数、pv到购买转化率、加购到购买转化率
    - 用途：分析不同类目的用户行为模式和转化效果

31. **behavior_distribution_by_category.csv**
    - 内容：各类目内的行为分布
    - 包含字段：类目ID、行为类型、计数、总计、百分比
    - 用途：了解各类目内部的行为分布情况

### 预测模型分析

32. **purchase_prediction_report.csv**
    - 内容：购买预测模型的性能报告
    - 包含字段：精确率、召回率、F1分数、支持度
    - 用途：评估购买行为预测模型的性能

33. **feature_importance.csv**
    - 内容：预测模型中各特征的重要性排序
    - 包含字段：特征名、重要性
    - 用途：了解哪些特征对预测购买行为最重要

## 可视化图表 (result/figures/)

### 用户行为可视化

1. **behavior_distribution.png**
   - 内容：用户行为分布的条形图
   - 用途：直观展示不同行为类型的分布情况

2. **daily_behavior_patterns.png**
   - 内容：每日用户行为模式的折线图
   - 用途：展示行为数量随日期变化的趋势

3. **hourly_behavior_patterns.png**
   - 内容：每小时用户行为模式的折线图
   - 用途：展示一天中不同时段的行为分布

4. **day_of_week_behavior_patterns.png**
   - 内容：星期几用户行为模式的条形图
   - 用途：展示一周中不同日期的行为分布

5. **purchase_frequency.png**
   - 内容：用户购买频率分布的条形图
   - 用途：展示不同购买频次的用户数量分布

6. **user_engagement_distribution.png**
   - 内容：用户参与度水平分布的条形图
   - 用途：展示不同参与度水平的用户分布

### 天猫数据可视化

7. **tmall_action_distribution.png**
   - 内容：天猫用户行为分布的条形图
   - 用途：展示天猫数据中不同行为类型的分布

8. **tmall_daily_action_patterns.png**
   - 内容：每日天猫用户行为模式的折线图
   - 用途：展示天猫行为随日期的变化趋势

9. **tmall_hourly_action_patterns.png**
   - 内容：每小时天猫用户行为模式的折线图
   - 用途：展示天猫用户一天中的活跃模式

10. **tmall_day_of_week_action_patterns.png**
    - 内容：星期几天猫用户行为模式的条形图
    - 用途：展示天猫用户一周中的活跃模式

11. **tmall_interaction_frequency.png**
    - 内容：用户-商品交互频率分布的直方图
    - 用途：展示用户与商品交互次数的分布

### 用户分群与聚类可视化

12. **user_segment_distribution.png**
    - 内容：用户分群分布的条形图
    - 用途：展示RFM分群结果的用户分布

13. **kmeans_elbow.png**
    - 内容：K值选择的肘部法则图
    - 用途：帮助确定K-means聚类的最佳簇数

14. **cluster_radar_charts.png**
    - 内容：各聚类特征的雷达图
    - 用途：多维度展示各聚类的特征模式

15. **cluster_sizes.png**
    - 内容：各聚类的用户数量的条形图
    - 用途：展示聚类结果中各簇的大小

16. **cluster_conversion_rates.png**
    - 内容：各聚类的平均购买转化率的条形图
    - 用途：比较不同聚类用户的购买倾向

### 购买行为可视化

17. **purchase_interval_distribution.png**
    - 内容：用户平均购买间隔分布的直方图
    - 用途：展示用户购买周期的分布

18. **user_category_distribution.png**
    - 内容：用户购买品类数分布的条形图
    - 用途：展示用户购买多样性的分布

### 用户旅程可视化

19. **behavior_transitions.png**
    - 内容：行为转换概率的条形图
    - 用途：展示用户从一种行为转向另一种行为的概率

20. **time_between_behaviors.png**
    - 内容：用户行为之间平均时间的条形图
    - 用途：展示不同行为之间的时间间隔

### 类目分析可视化

21. **top_categories.png**
    - 内容：前20个热门商品类目的条形图
    - 用途：展示最受欢迎的商品类目

22. **category_conversion_rates.png**
    - 内容：按类目的PV到购买转化率的条形图
    - 用途：比较不同类目的转化效果

23. **top5_category_behavior_distribution.png**
    - 内容：前5个类目的行为分布的条形图
    - 用途：展示热门类目内部的行为分布

### 预测模型可视化

24. **feature_importance.png**
    - 内容：特征重要性的条形图
    - 用途：展示各特征对购买预测的重要程度

### 综合可视化

25. **conversion_funnel.png**
    - 内容：用户行为转化漏斗的条形图
    - 用途：展示从浏览到购买的整体转化漏斗

26. **user_activity_time_distribution.png**
    - 内容：用户活跃度时间分布的组合图
    - 用途：展示用户在每小时和每星期的活跃模式

27. **hourly_daily_activity_heatmap.png**
    - 内容：每日每小时用户活跃度的热图
    - 用途：以热图形式展示时间维度的用户活跃度

## 执行摘要

**executive_summary.md**
- 内容：分析结果的执行摘要，总结关键发现和优化建议
- 包含章节：
  1. 数据概览：数据集基本信息
  2. 关键发现：主要分析结果
  3. 用户行为洞察：用户分群和行为模式
  4. 商品与类目洞察：热门类目和转化表现
  5. 优化建议：基于分析结果提出的改进措施
- 用途：为管理层决策提供简明扼要的分析结论和建议

这些输出文件共同构成了一个全面的淘宝用户行为分析系统，从多个维度深入分析用户行为模式，为精准营销、个性化推荐、平台优化和决策制定提供数据支持。